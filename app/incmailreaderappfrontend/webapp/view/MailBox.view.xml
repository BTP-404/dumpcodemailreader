<mvc:View
    controllerName="com.incresol.incmailreaderappfrontend.controller.MailBox"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
>
    <Panel>
        <Bar
            id="1headerBar131"
            class="header"
        >
            <contentLeft>
                <Image
                    id="_I1DGenImage1131"
                    src="./images/incresollogo.png"
                    alt="Logo"
                    width="115px"
                    height="35px"
                />
            </contentLeft>
            <contentMiddle>
                <Text
                    id="_1IDGenTitle123"
                    text="Incresol Mail Processor"
                    class="title"
                />
            </contentMiddle>
            <contentRight>
                <core:Icon
                    id="_1DGenIco33n"
                    src="sap-icon://customer"
                    color="#08085b"
                    class="bold-icon"
                    press="handlePopoverPress"
                />
            </contentRight>
        </Bar>
    </Panel>
    <Panel
        class="sapUiSmallMargin"
        width="97%"
    >
        <ScrollContainer
            height="450px"
            width="100%"
            vertical="true"
            focusable="true"
        >
            <Table
                id="mailTable"
                items="{/EmailData}"
                growing="true"
                sticky="ColumnHeaders"
                alternateRowColors="true"
                enableBusyIndicator="true"
            >
                <columns>
                    <Column width="17rem">
                        <Text text="From" />
                    </Column>
                    <Column>
                        <Text
                            text="Subject"
                            width="20rem"
                        />
                    </Column>

                    <Column>
                        <Text
                            text="Date"
                            width="17rem"
                        />
                    </Column>
                    <Column>
                        <Text
                            text="Body"
                            width="10rem"
                        />
                    </Column>

                    <Column>
                        <Text
                            text="Attachment"
                            width="15rem"
                        />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text
                                text="{path: 'sender', formatter: '.formatter.formatEmail'}"
                            />
                            <Text text="{subject}" />

                            <Text text="{date}" />
                            <HBox >
                            <Button
                                icon="sap-icon://show"
                                type="Reject"
                                press="onPreviewBody"
                            />
                            <Text text="{body}" visible="false"></Text>
                            </HBox>
                            
                            <HBox>
                                <Button
                                    icon="sap-icon://attachment"
                                    type="Accept"
                                    press="onShowAttachments"
                                />
                                <VBox>
                                    <Text
                                        text="{= ${noOfAttachments} ? '+' + ${noOfAttachments} : '+0'}"
                                    />
                                </VBox>
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </ScrollContainer>
    </Panel>
</mvc:View>
