sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/Input","sap/m/VBox","sap/m/Button","sap/ui/core/Item","sap/m/Select","sap/ui/core/Fragment"],function(e,t,a,o,s,r,l,n){"use strict";var i;return e.extend("com.mailprocessor.controller.EmailAccountConfiguration",{onInit:function(){},onAfterRendering:function(){this._showTermsDialog()},_showTermsDialog:function(){var e=this.getView();var a=e.byId("termsDialog");if(!a){a=sap.ui.xmlfragment(e.getId(),"com.mailprocessor.fragments.TermsDialog",this);if(!a){t.show("The TermsDialog fragment could not be loaded.");return}e.addDependent(a)}a.open()},onAcceptTermsPress:function(){var e=this.getView();var t=e.byId("termsDialog");if(t){t.close()}var a=e.byId("mainContentVBox");if(a){a.setVisible(true)}},onCancelTermsPress:function(){var e=this.getView().byId("termsDialog");if(e){e.close()}t.show("You need to accept the terms to proceed.");setTimeout(function(){var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RouteHomeDetail")}.bind(this),6e5)},oMarkRead:false,onSwitchChange:function(e){this.oMarkRead=e.getParameter("state")},onSubmit:function(){var e=this.getView();var a=e.byId("fullNameInput");var o=e.byId("emailInput");var s=e.byId("passwordInput");var r=e.byId("protocolSelect");var l=e.byId("authSelect");var n=e.byId("portInput");var i=e.byId("securitySelect");var u=e.byId("hostnameInput");var c=e.byId("pollingFrequencyInput");const d=/^[A-Za-zÀ-ÖØ-ÿ' \-]+$/;const g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;var m=e.byId("multiComboBoxId");var V=m.getSelectedKeys();if(a.getValue()){if(d.test(a.getValue())){a.setValueState("None");if(o.getValue()){if(g.test(o.getValue())){o.setValueState("None");if(s.getValue()){s.setValueState("None");if(r.getSelectedKey()){r.setValueState("None");if(l.getSelectedKey()){l.setValueState("None");if(n.getValue()){n.setValueState("None");if(n.getValue()>=0&&n.getValue()<=65535){n.setValueState("None");if(i.getSelectedKey()){i.setValueState("None");if(u.getValue()){u.setValueState("None");if(c.getValue()){c.setValueState("None");if(c.getValue()>=0){c.setValueState("None");let e=this.getView().getModel();let d=e.bindList("/EmailConfiguration");var p=parseInt(n.getValue(),10);var S=parseInt(c.getValue(),10);var f=d.create({fullName:a.getValue(),emailId:o.getValue(),password:s.getValue(),protocol:r.getSelectedKey(),authenticationMethod:l.getSelectedKey(),port:p,connectionSecurity:i.getSelectedKey(),hostName:u.getValue(),pollingFrequency:S,markRead:this.oMarkRead,keywords:V});f.created().then(()=>{t.show("Submitted successfully");var e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("RouteConfiguredMail")}).catch(e=>{t.show(e)})}else{c.setValueStateText("polling frequency is not valid");c.setValueState("Error")}}else{c.setValueStateText("polling frequency is mandatory");c.setValueState("Error")}}else{u.setValueStateText("host is mandatory");u.setValueState("Error")}}else{i.setValueStateText("connection security is invalid");i.setValueState("Error")}}else{n.setValueStateText("port no is invalid");n.setValueState("Error")}}else{n.setValueStateText("port no is mandatory");n.setValueState("Error")}}else{l.setValueStateText("authentication is mandatory");l.setValueState("Error")}}else{r.setValueStateText("protocol is mandatory");r.setValueState("Error")}}else{s.setValueStateText("password is mandatory");s.setValueState("Error")}}else{o.setValueStateText("please enter valid email");o.setValueState("Error")}}else{o.setValueStateText("email is mandatory");o.setValueState("Error")}}else{a.setValueStateText("please enter valid name");a.setValueState("Error")}}else{a.setValueStateText("name is mandatory");a.setValueState("Error")}},onPressCheckPrevious:function(){var e=this.getView();var t=e.byId("panelDialog1");if(!t){t=sap.ui.xmlfragment(e.getId(),"com.mailprocessor.fragments.PanelFragment",this);if(!t){sap.m.MessageToast.show("The PanelFragment could not be loaded.");return}if(t instanceof sap.ui.core.Control){e.addDependent(t)}else{sap.m.MessageToast.show("The loaded fragment is not a valid UI control.");return}}t.open()},onClosePanelDialog:function(){var e=this.getView();var t=e.byId("panelDialog1");t.close()}})});
//# sourceMappingURL=EmailAccountConfiguration.controller.js.map